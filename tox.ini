[tox]
envlist = py27, py36
skip_missing_interpreters = true

[testenv:py36]
deps =
    -rdev-requirements.txt
commands = 
    pytest -lvv --cov=gdcdictionary --cov-report xml --cov-report html --junit-xml test-reports/results.xml  {posargs}

[testenv:py27]
deps =
    setuptools==44.1.1
    -rdev-requirements.txt
commands = 
    pytest -lvv --cov=gdcdictionary --cov-report xml --cov-report html --junit-xml test-reports/results.xml  {posargs}

[testenv:publish]
isolated_build=False
skip_install=true
passenv =
    TWINE_USERNAME
    TWINE_PASSWORD
    TWINE_REPOSITORY_URL
install_command = python -m pip install {opts} {packages}
deps=
    setuptools_scm
    twine
commands =
    python -m setuptools_scm
    python -m flit build
    twine check dist/*
    twine upload dist/*
