$schema: "http://json-schema.org/draft-04/schema#"

title: Case
type: object
namespace: http://gdc.nci.nih.gov
category: administrative
project: '*'
description: "TODO"
additionalProperties: false
validators: []

systemProperties:
  - case_id
  - project
  - type
  - state

required:
  - case_alias
  - linkTo
  - gender
  - race

unique_keys:
  - [case_id]
  - [project_id, case_alias]

# Case properties
properties:
  case_alias:
    type:
      - string
      - "null"
  type:
    type: string
  state:
    type: string
  gender:
    title: Gender
    cde_id: 2200604
    type: string
    description: |
      Identification of gender is based upon self-report and may come
      from a form, questionnaire, interview, etc
    enum:
      - female
      - male
      - unknown
      - unspecified
  race:
    title: Race
    cde_id: 21922199
    description: |
      Patient's race using the defined categories
    enum:
      - American Indian or Alaska Native
      - Asian
      - White
      - Black or African American
      - Native Hawaiian or other Pacific Islander
      - Not Evaluated
      - Unknown
  ethnicity:
    title: Ethnicity
    description: |
      Patient's ethnicity using the defined categories
    cde_id: 2200604
    enum:
      - female
      - male
      - unknown
      - unspecified


# Cases should only have one parent which is the project it belongs to
  linkTo:
    type: object
    additionalProperties: false
    oneOf:
      - required:
          - project_id
      - required:
          - project_alias
    properties:
      project_id:
        $ref: "definitions.yaml#/UUID"
        #parentType is a GDC specific extension
        parentType: project
      project_alias:
        type: string
        parentType: project
