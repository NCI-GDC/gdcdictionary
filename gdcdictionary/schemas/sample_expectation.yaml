$schema: "http://json-schema.org/draft-04/schema#"

id: "sample_expectation"
title: Sample Expectation
type: object
namespace: http://bloodprofilingatlas.org/bpa/
category: biospecimen
program: '*'
project: '*'
description: >
  Any mutations or other values for a paricular sample that are expected to be observed through
  experimentation.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

required:
  - submitter_id
  - samples 

uniqueKeys:
  - [ id ]
  - [ project_id, submitter_id ]

links:
  - name: samples
    backref: sample_expectations
    label: expected_of
    target_type: sample
    multiplicity: many_to_one
    required: true

properties:
  type:
    enum: [ "sample_expectation" ]
  id:
    $ref: "_definitions.yaml#/UUID"
    systemAlias: node_id
  state:
    $ref: "_definitions.yaml#/state"
  submitter_id:
    type:
      - string
      - "null"
  expected_mutation_type:
    description: "The type of mutation expected in the sample. (e.g. missense, indel, etc)"
    type: string
  expected_mutation_chromosome:
    description: "The chromosome on which the mutation should be located."
    type: string
  expected_mutation_position:
    description: "The amino acid or base position of the expected mutation."
    type: string
  expected_mutation_gene:
    description: "The gene in which the mutation is expected to occur."
    type: string
  expected_mutation_reference:
    description: "Identifier for the bases/amino acids in the reference genome."
    type: string
  expected_mutation_alt:
    description: "Expected mutated bases/amino acids in the sample."
    type: string
  expected_aa_change:
    description: "The amino acid reference, position, and alt combo (e.g. V600E)."
    type: string
  expected_allelic_fraction:
    description: "Relative frequency of the expected allele."
    type: number
  expected_copy_number:
    description: "The expected copy number ratio at the expected locus."
    type: number
  samples:
    $ref: "_definitions.yaml#/to_one"
  project_id:
    type: string
  created_datetime:
    $ref: "_definitions.yaml#/datetime"
  updated_datetime:
    $ref: "_definitions.yaml#/datetime"
